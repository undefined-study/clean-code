# 9장. 단위 테스트

제대로된 테스트는 무엇인가?

### TDD 법칙 세 가지

1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.

_우리가 흔하게 알고 있는 TDD 방식의 기본 내용같다._

2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도의 단위 테스트를 작성한다.

_타입스크립트가 주는 역할과 비슷한 맥락인듯하다.
타입 에러는 뱉지만, 제품 빌드 단계에서는 타입이 전혀 영향을 끼치지 않는것처럼
테스트코드도 마찬가지의 역할로 보는 것이 좋겠다._

3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

_테스트 케이스를 작성할 때 대부분 기능의 목적을 담기 때문에
목표한 기능에서 살을 붙이지 말라는 의미? 같다. 또한,
너무 방대한 테스트를 작성하지 말라는 의미로 받아드려진다._

### 깨끗한 테스트 코드 유지하기

테스트 코드가 지저분할수록 실제 코드는 변경하기 어려워진다.
테스트 통과를 위해서 테스트 케이스를 늘리고, 실제 코드를 테스트 코드에
맞춰 작성하다보면 실제 코드도 복잡해지고 점점 통과하기 어려워진다.
테스트 코드는 부담이 되어서는 안된다.

테스트 코드는 실제 코드 못지 않게 중요하다.
실제 코드 못지 않게 깨끗하게 짜야 한다.

#### 테스트는 유연성, 유지보수성, 재사용성을 제공한다

테스트 케이스가 버젓이 버티고 있다면, 실제 코드를 변경하기도 쉽다.
테스트 케이스가 없다면 변경이 두려워진다.

_(믿는 구석이 있어서?)_

### 깨끗한 테스트 코드

가독성은 테스트 코드에 더더욱 중요하고, 본론에 진짜 필요한
자료 유형과 함수만 사용하자.

#### 도메인에 특화된 테스트 언어

함수와 유틸리티 함수로 로직을 묶어 작성하면
테스트 코드를 짜기도 읽기도 쉬워진다.

_이전에 테스트관련 영상을 봤을때 '순수하지 않는 함수를 어떻게 테스트할까
고민하다가 순수하게 뜯어낼 수 있는 부분 부분을 함수로 정의했더니
코드도 클린해지고 테스트도 쉬워졌다' 라는 이야기를 들었었는데
테스트 코드의 순기능 중 하나가 아닐까 싶다._

#### 이중 표준

최소의 표현을 사용한 직관적인 가독성은 중요하지만,
실제 코드만큼 효율적일 필요는 없다. 실제환경과 테스트환경은 아무래도 상이하다.

### 테스트 당 assert 하나

테스트 코드를 짤 때는 함수마다 assert 문 단 하나만 사용해야 한다.
하나의 함수의 테스트를 여럿으로 나누어 진행하면 중복되는 코드가 많아진다.

#### 테스트 당 개념 하나

'테스트 함수마다 한 개념만 테스트하라!', 함수 코드를 짤 때랑
같은 규칙이다. 개념 세개를 테스트하려면 세 가지 테스트로 분리해서 테스트하자.

_오늘도 플래그 파라미터를 받는 함수 정의함.._

### F.I.R.S.T

빠르게. 돌아가는 테스트 코드를 통해 자주 돌려볼 수 있도록 하자.

독립적으로, 테스트는 서로 의존해서는 안된다. 하나가 실패하면
잇달아 실패하므로 어디서 실패가 되었는지 원인을 진단하기 어려워진다.

반복가능하게. 테스트가 돌아가는 환경을 여럿 만들고, 어떤 환경에서도
반복할 수 있도록 해야 한다.

자가검증하는. 성공 혹은 실패를 반환하는 부울값으로 결과를 나타내자.
텍스트를 리턴하면 읽기 피곤해지고, 판단이 주관적이게 된다.

적시에. 테스트를 하려는 실제 코드를 구현하기 직전에 테스트 코드를 작성하자.
실제 코드를 구현하고 나면, 오히려 테스트하기 어렵다고 느껴질 수 있다.

### 결론

### 참고 문헌
